<!DOCTYPE html>
<meta charset="utf-8" />
<html lang="en">

<head>
    <title>: [ messages from the great mother ] :</title>
    <meta name="description" content="Messages?">
    <meta name="author" content="This message is.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>
        // A fortune cookie app
    </script>

    <link href="https://fonts.googleapis.com/css?family=Alegreya+Sans+SC:100|Flamenco" rel="stylesheet">

    <style type="text/css">
        body {
            background-color: rgba(0, 0, 55, .5);
            background-image: linear-gradient(90deg, rgba(255, 255, 255, .07) 50%, transparent 50%), linear-gradient(90deg, rgba(255, 255, 255, .13) 50%, transparent 50%), linear-gradient(90deg, transparent 50%, rgba(255, 255, 255, .17) 50%), linear-gradient(90deg, transparent 50%, rgba(255, 255, 255, .19) 50%);
            background-size: 3px, 13px, 17px, 5px;
            padding: 0;
            margin: 0;
            overflow: hidden;
            font-weight: bold;
            color: white;
            align: center;
            vertical-align: middle;
            font-family: "Playfair Display", georgia, serif;
        }
        
        #quote1 {
            position: absolute;
            border-radius: 15px;
            text-align: center;
            top: 35%;
            left: 20%;
            right: 20%;
            background-color: rgba(0, 0, 55, .5);
            background-image: linear-gradient(90deg, rgba(255, 255, 255, .07) 50%, transparent 50%), linear-gradient(90deg, rgba(255, 255, 255, .13) 50%, transparent 50%), linear-gradient(90deg, transparent 50%, rgba(255, 255, 255, .17) 50%), linear-gradient(90deg, transparent 50%, rgba(255, 255, 255, .19) 50%);
            background-size: 3px, 13px, 17px, 5px;
            background-repeat: no-repeat;
            background-origin: 0;
            z-index: 0;
            overflow: auto;
            color: white;
            font-size: 18pt;
            text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;
        }
        
        a,
        a:visited,
        a:active,
        a:hover {
            color: #fff;
            text-decoration: underline;
        }
        
        p {
            display: inline;
        }
        
        #quote-box {
            width: 25%;
            background-color: white;
            margin-right: auto;
            margin-left: auto;
            text-align: center;
            padding: 50px 50px 70px 50px;
            border-radius: 15px;
            align: center;
        }
        
        #quote {
            padding-bottom: 5px;
            padding-top: 5px;
            font-family: 'Raleway', sans-serif;
            font-size: 1em;
        }
        
        #author {
            font-size: .5em;
            padding: 5px;
            right: 2%;
        }
        
        #right-buttons,
        #right-buttons-hover,
        #left-buttons {
            line-height: 25px;
            height: 25px;
            display: inline-block;
            position: relative;
            float: center;
            border-radius: 3px;
            color: white;
        }
        
        #right-buttons:hover,
        #left-buttons:hover,
        #right-buttons-hover:hover {
            cursor: pointer;
        }
        
        #right-buttons,
        #right-buttons-hover {}
        
        #left-buttons {
            float: left;
            font-size: 1.5em;
        }
        
        .standard {
            background-color: hsl(20, 68%, 67%);
        }
        
        .standard-text {
            color: hsl(120, 68%, 67%);
        }
        
        .highlight {
            background-color: hsl(20, 68%, 67%);
        }
        
        @import url(https://fonts.googleapis.com/css?family=Playfair+Display:400,400italic,700);
        .footerg {
            position: absolute;
            right: 0;
            top: 0;
            left: 0;
            padding: 1px;
            width: 100%;
            background-color: rgba(0, 0, 0, .25);
            color: rgba(255, 255, 255, 1);
            text-align: center;
            font-style: italic;
        }
        
        .footerg a {
            -webkit-transform: translateZ(80px);
            transform: translateZ(80px);
            color: rgba(255, 255, 255, 1);
            pointer-events: auto;
            padding: 10px 15px;
            background: #4479BA;
            color: #FFF;
            -webkit-border-radius: 4px;
            -moz-border-radius: 4px;
            border-radius: 4px;
            border: solid 1px #20538D;
            text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.4);
            -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.4), 0 1px 1px rgba(0, 0, 0, 0.2);
            -moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.4), 0 1px 1px rgba(0, 0, 0, 0.2);
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.4), 0 1px 1px rgba(0, 0, 0, 0.2);
            -webkit-transition-duration: 0.2s;
            -moz-transition-duration: 0.2s;
            transition-duration: 0.2s;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        .footerg a:hover {
            background: #356094;
            border: solid 1px #2A4E77;
            text-decoration: none;
        }
        
        .footerg a:active {
            -webkit-box-shadow: inset 0 1px 4px rgba(0, 0, 0, 0.6);
            -moz-box-shadow: inset 0 1px 4px rgba(0, 0, 0, 0.6);
            box-shadow: inset 0 1px 4px rgba(0, 0, 0, 0.6);
            background: #2E5481;
            border: solid 1px #203E5F;
        }
    </style>
</head>

<body>

    <div id="container"></div>
    <!--
    <div id="quote1">
        <div id="quote"> <i class="fa fa-quote-left">&nbsp&nbsp</i><span id='text'><p>test this is a test to see what happens with a lot of text</p></span> </div>
        <div id="author"> Author author </div>

        <div id="right-buttons-hover" class="highlight"> New Quote </div>
        <div id="right-buttons" class="standard"> New Quote </div>
-->
    </div>
    <!--  only scripts below this line!!    -->
    <script src="https://code.jquery.com/jquery-1.12.4.min.js" type="text/javascript"></script>
    <script src="three.js"></script>

    <script src="Detector.js"></script>
    <script src="DeviceOrientationControls.js"></script>
    <script src="VRControls.js"></script>

    <script src="OrbitControls.js"></script>
    <script src="Mirror.js"></script>
    <script src="WaterShader.js"></script>
<!--
    <script>
        /*This isn't the final, this is just a fork with a few bugs */

        $(document).ready(function() {
            var $hue = Math.floor((Math.random() * 360) + 1);

            $("#right-buttons-hover").hide()

            /*this will hold quote dictionaries*/

            var quoteBank = [];
            $.getJSON("https://quotesondesign.com/wp-json/posts?filter[orderby]=rand&filter[posts_per_page]=30&callback=", function(data) {

                data.forEach(function(val) {
                    quoteBank.push(val);
                })
                changeQuote();
            });

            /*changes the theme of the website */
            function changeColor() {
                $hue = Math.floor((Math.random() * 360) + 1);
                $("body, .standard").animate({
                    "background-color": "hsl(" + $hue + ", 68%, 67%)",
                    queue: false
                }, 1500);
                $(".standard-text").animate({
                    "color": "hsl(" + $hue + ", 68%, 67%)",
                    queue: false
                }, 1500);
                /* This didn't work the way I wanted it to but I like how it checks for hover and wanted to keep the code for reference
    
                if ($('#right-buttons:hover').length != 0) {
                  $('#right-buttons').animate({"background-color":  "hsl("+$hue+", 68%, 55%)"}, 1500);*/
                $(".highlight").animate({
                    "background-color": "hsl(" + $hue + ", 68%, 55%)",
                    queue: false
                }, 1500);
            }

            function changeQuote() {
                var randomQuote = Math.floor((Math.random() * 29))
                $("#text").html(quoteBank[randomQuote].content);
                $("#author").html(quoteBank[randomQuote].title);
            }


            $("#left-buttons").hover(function() {
                $(this).css({
                    "background-color": "hsl(" + $hue + ", 68%, 55%)"
                })
            }, function() {
                $(this).css({
                    "background-color": "hsl(" + $hue + ", 68%, 67%)"
                })
            });

            changeColor();
            console.log(quoteBank.length)
                /*this changeQuote() call breaks all jQuery below it and does not execture if placed at the very bottom of the jQuery inside of the document ready function*/
                /*
                changeQuote(); */

            //I'm making this a little messy because the changeColor function was not working well with a simple .css change for #right-buttons.  The highlighted or standard color would "freeze" during the animation and I would need to move the mouse back over the button to corret the coloration.  I want the highlight color to be darker, so I could not simply change the opacity.
            $("#right-buttons, #right-buttons-hover").hover(
                function() {
                    $("#right-buttons").hide()
                    $("#right-buttons-hover").show()
                },
                function() {
                    $("#right-buttons").show()
                    $("#right-buttons-hover").hide()
                });

            $("#right-buttons-hover").on('click', function() {
                changeQuote();
                changeColor();

            });

        });
    </script>
-->

    <script>
        if (!Detector.webgl) {
            Detector.addGetWebGLMessage();
            document.getElementById('container').innerHTML = "";
        }
        var container, stats;
        var camera, scene, renderer;
        var sphere;
        var parameters = {
            width: 2000,
            height: 2000,
            widthSegments: 250,
            heightSegments: 250,
            depth: 1500,
            param: 4,
            filterparam: 1
        };
        var waterNormals;

        init();
        animate();

        function init() {
            container = document.createElement('div');
            document.body.appendChild(container);
            renderer = new THREE.WebGLRenderer();
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.setSize(window.innerWidth, window.innerHeight);
            container.appendChild(renderer.domElement);
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(55, window.innerWidth / window.innerHeight, 0.5, 3000000);
            camera.position.set(2000, 750, 2000);
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls1 = new THREE.DeviceOrientationControls(camera, renderer.domElement);
            controls2 = new THREE.VRControls(camera, renderer.domElement);

            controls.enablePan = false;
            controls.minDistance = 1000.0;
            controls.maxDistance = 5000.0;
            controls.maxPolarAngle = Math.PI * 0.495;
            controls.target.set(0, 500, 0);
            scene.add(new THREE.AmbientLight(0x444444));
            var light = new THREE.DirectionalLight(0xffffbb, 1);
            light.position.set(-1, 1, -1);
            scene.add(light);
            waterNormals = new THREE.TextureLoader().load('waternormals.jpg');
            waterNormals.wrapS = waterNormals.wrapT = THREE.RepeatWrapping;
            water = new THREE.Water(renderer, camera, scene, {
                textureWidth: 512,
                textureHeight: 512,
                waterNormals: waterNormals,
                alpha: 1.0,
                sunDirection: light.position.clone().normalize(),
                sunColor: 0xffffff,
                waterColor: 0x001e0f,
                distortionScale: 50.0,
            });
            mirrorMesh = new THREE.Mesh(
                new THREE.PlaneBufferGeometry(parameters.width * 500, parameters.height * 500),
                water.material
            );
            mirrorMesh.add(water);
            mirrorMesh.rotation.x = -Math.PI * 0.5;
            scene.add(mirrorMesh);
            // load skybox
            var cubeMap = new THREE.CubeTexture([]);
            cubeMap.format = THREE.RGBFormat;
            var loader = new THREE.ImageLoader();
            loader.load('3.png', function(image) {
                var getSide = function(x, y) {
                    var size = 1024;
                    var canvas = document.createElement('canvas');
                    canvas.width = size;
                    canvas.height = size;
                    var context = canvas.getContext('2d');
                    context.drawImage(image, -x * size, -y * size);

                    function resizeCanvas() {
                        $(document).width = window.innerWidth;
                        $(document).height = window.innerHeight;
                    };
                    window.addEventListener('resize', resizeCanvas, false);
                    window.addEventListener('resize', onWindowResize, false);

                    function onWindowResize() {

                        camera.aspect = window.innerWidth / window.innerHeight;
                        camera.updateProjectionMatrix();

                        renderer.setSize(window.innerWidth, window.innerHeight);
                    }
                    return canvas;
                };
                cubeMap.images[0] = getSide(2, 1); // px
                cubeMap.images[1] = getSide(0, 1); // nx
                cubeMap.images[2] = getSide(1, 0); // py
                cubeMap.images[3] = getSide(1, 2); // ny
                cubeMap.images[4] = getSide(1, 1); // pz
                cubeMap.images[5] = getSide(3, 1); // nz
                cubeMap.needsUpdate = true;
            });
            var cubeShader = THREE.ShaderLib['cube'];
            cubeShader.uniforms['tCube'].value = cubeMap;
            var skyBoxMaterial = new THREE.ShaderMaterial({
                fragmentShader: cubeShader.fragmentShader,
                vertexShader: cubeShader.vertexShader,
                uniforms: cubeShader.uniforms,
                depthWrite: false,
                side: THREE.BackSide
            });
            var skyBox = new THREE.Mesh(
                new THREE.BoxGeometry(1000000, 1000000, 1000000),
                skyBoxMaterial
            );
            scene.add(skyBox);
            var geometry = new THREE.IcosahedronGeometry(400, 4);
            for (var i = 0, j = geometry.faces.length; i < j; i++) {
                geometry.faces[i].color.setHex(Math.random() * 0xffffff);
            }
            var material = new THREE.MeshPhongMaterial({
                vertexColors: THREE.FaceColors,
                shininess: 100,
                envMap: cubeMap
            });

        }
        //
        function animate() {
            requestAnimationFrame(animate);
            render();
        }

        function render() {
            var time = performance.now() * 0.001;

            water.material.uniforms.time.value += 1.0 / 60.0;
            controls.update();
            water.render();
            renderer.render(scene, camera);
        }
    </script>
    <script>
        $(window).resize(function() {
            init();
            animate();
        });
    </script>
</body>

</html>